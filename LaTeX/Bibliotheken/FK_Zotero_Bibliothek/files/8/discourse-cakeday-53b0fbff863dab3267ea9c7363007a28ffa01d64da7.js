define("discourse/plugins/discourse-cakeday/discourse/adapters/anniversary",["exports","discourse/plugins/discourse-cakeday/discourse/adapters/cakeday"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default}),define("discourse/plugins/discourse-cakeday/discourse/adapters/birthday",["exports","discourse/plugins/discourse-cakeday/discourse/adapters/cakeday"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default}),define("discourse/plugins/discourse-cakeday/discourse/adapters/cakeday",["exports","discourse/adapters/rest"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({basePath:function(){return"/cakeday/"}})}),define("discourse/plugins/discourse-cakeday/discourse/routes/cakeday-anniversaries-today",["exports","discourse/plugins/discourse-cakeday/discourse/routes/build-cakeday-route"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.default)("anniversary","today")}),define("discourse/plugins/discourse-cakeday/discourse/routes/cakeday-anniversaries-upcoming",["exports","discourse/plugins/discourse-cakeday/discourse/routes/build-cakeday-route"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.default)("anniversary","upcoming")}),define("discourse/plugins/discourse-cakeday/discourse/routes/cakeday-birthdays",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Discourse.Route.extend({beforeModel:function(){this.siteSettings.cakeday_birthday_enabled||this.transitionTo("unknown",window.location.pathname.replace(/^\//,""))},titleToken:function(){return I18n.t("birthdays.title")}})}),define("discourse/plugins/discourse-cakeday/discourse/routes/build-cakeday-route",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,t){return Discourse.Route.extend({model:function(a){return a.timezone_offset=(new Date).getTimezoneOffset(),t&&(a.filter=t),this.store.find(e,a)}})}}),define("discourse/plugins/discourse-cakeday/discourse/routes/cakeday-birthday-tomorrow",["exports","discourse/plugins/discourse-cakeday/discourse/routes/build-cakeday-route"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.default)("birthday","tomorrow")}),define("discourse/plugins/discourse-cakeday/discourse/routes/cakeday-birthdays-today",["exports","discourse/plugins/discourse-cakeday/discourse/routes/build-cakeday-route"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.default)("birthday","today")}),define("discourse/plugins/discourse-cakeday/discourse/routes/cakeday-birthdays-upcoming",["exports","discourse/plugins/discourse-cakeday/discourse/routes/build-cakeday-route"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.default)("birthday","upcoming")}),define("discourse/plugins/discourse-cakeday/discourse/routes/cakeday-birthdays-index",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Discourse.Route.extend({beforeModel:function(){this.replaceWith("cakeday.birthdays.today")}})}),define("discourse/plugins/discourse-cakeday/discourse/routes/cakeday-anniversaries-tomorrow",["exports","discourse/plugins/discourse-cakeday/discourse/routes/build-cakeday-route"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.default)("anniversary","tomorrow")}),define("discourse/plugins/discourse-cakeday/discourse/routes/cakeday-anniversaries",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Discourse.Route.extend({beforeModel:function(){this.siteSettings.cakeday_enabled||this.transitionTo("unknown",window.location.pathname.replace(/^\//,""))},titleToken:function(){return I18n.t("anniversaries.title")}})}),define("discourse/plugins/discourse-cakeday/discourse/routes/cakeday-anniversaries-all",["exports","discourse/plugins/discourse-cakeday/discourse/routes/build-cakeday-route"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.default)("anniversary").extend({queryParams:{month:{refreshModel:!0}},refreshQueryWithoutTransition:!0})}),define("discourse/plugins/discourse-cakeday/discourse/routes/cakeday-anniversaries-index",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Discourse.Route.extend({beforeModel:function(){this.replaceWith("cakeday.anniversaries.today")}})}),define("discourse/plugins/discourse-cakeday/discourse/routes/cakeday-birthdays-all",["exports","discourse/plugins/discourse-cakeday/discourse/routes/build-cakeday-route"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.default)("birthday").extend({queryParams:{month:{refreshModel:!0}},refreshQueryWithoutTransition:!0})}),define("discourse/plugins/discourse-cakeday/discourse/components/emoji-images",["exports","ember-addons/ember-computed-decorators","discourse/lib/text"],function(e,t,a){"use strict";function i(e,t,a,i,r){var n={};return Object.keys(i).forEach(function(e){n[e]=i[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=a.slice().reverse().reduce(function(a,i){return i(e,t,a)||a},n),r&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(r):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}Object.defineProperty(e,"__esModule",{value:!0});var r,n,s;e.default=Ember.Component.extend((r=(0,t.default)("list"),n=(0,t.default)("title"),s={classNames:["emoji-images"],emojiHTML:function(e){return e.split("|").map(function(e){return(0,a.emojiUnescape)(":"+e+":",{skipTitle:!0})})},titleText:function(e){return I18n.t(e)}},i(s,"emojiHTML",[r],Object.getOwnPropertyDescriptor(s,"emojiHTML"),s),i(s,"titleText",[n],Object.getOwnPropertyDescriptor(s,"titleText"),s),s))}),define("discourse/plugins/discourse-cakeday/discourse/lib/cakeday",["exports"],function(e){"use strict";function t(e,t){var a="YYYY",i=moment(),r=moment(e);return!(t&&t.anniversary&&i.format(a)<=r.format(a))&&(a="MMDD",i.format(a)===r.format(a))}function a(e){return!Ember.isEmpty(e)&&t(e,{anniversary:!0})}function i(e){return!Ember.isEmpty(e)&&t(e)}function r(e,t){return s(e,t)?"user.anniversary.user_title":"user.anniversary.title"}function n(e,t){return s(e,t)?"user.date_of_birth.user_title":"user.date_of_birth.title"}function s(e,t){return!!t&&e.get("id")===t.get("id")}Object.defineProperty(e,"__esModule",{value:!0}),e.isSameDay=t,e.cakeday=a,e.cakedayBirthday=i,e.cakedayTitle=r,e.cakedayBirthdayTitle=n}),define("discourse/plugins/discourse-cakeday/discourse/discourse-cakeday-route-map",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){this.route("cakeday",{path:"/cakeday",resetNamespace:!0},function(){this.route("birthdays",{path:"/birthdays"},function(){this.route("today",{path:"/today"}),this.route("tomorrow",{path:"/tomorrow"}),this.route("upcoming",{path:"/upcoming"}),this.route("all",{path:"/all"})}),this.route("anniversaries",{path:"/anniversaries"},function(){this.route("today",{path:"/today"}),this.route("tomorrow",{path:"/tomorrow"}),this.route("upcoming",{path:"/upcoming"}),this.route("all",{path:"/all"})})})}}),define("discourse/plugins/discourse-cakeday/discourse/connectors/user-post-names/user-cakeday",["exports","discourse/plugins/discourse-cakeday/discourse/lib/cakeday"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={setupComponent:function(e,a){a.set("isCakeday",(0,t.cakeday)(e.model.get("created_at"))),a.set("isUserBirthday",(0,t.cakedayBirthday)(e.model.get("date_of_birth")))}}}),define("discourse/plugins/discourse-cakeday/discourse/connectors/user-custom-preferences/user-date-of-birth-input",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={setupComponent:function(e,t){t.set("months",moment.months().map(function(e,t){return{name:e,value:t+1}})),t.set("days",_.range(1,32));var a=e.model.get("date_of_birth");t.set("userBirthdayMonth",moment(a,"YYYY-MM-DD").month()+1),t.set("userBirthdayDay",moment(a,"YYYY-MM-DD").date());var i=function(){var a=t.get("userBirthdayMonth"),i=t.get("userBirthdayDay"),r=e.model,n="";""!==a&&""!==i&&(n="1904-"+t.get("userBirthdayMonth")+"-"+t.get("userBirthdayDay")),r.set("date_of_birth",n)};t.addObserver("userBirthdayMonth",i),t.addObserver("userBirthdayDay",i)}}}),define("discourse/plugins/discourse-cakeday/discourse/connectors/user-card-post-names/user-card-cakeday",["exports","discourse/plugins/discourse-cakeday/discourse/lib/cakeday"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={setupComponent:function(e,a){a.set("isCakeday",(0,t.cakeday)(e.user.get("created_at"))),a.set("isUserBirthday",(0,t.cakedayBirthday)(e.user.get("date_of_birth"))),a.set("cakedayTitle",(0,t.cakedayTitle)(e.user,this.currentUser)),a.set("cakedayBirthdayTitle",(0,t.cakedayBirthdayTitle)(e.user,this.currentUser))}}}),define("discourse/plugins/discourse-cakeday/discourse/controllers/cakeday-anniversaries-today",["exports","ember-addons/ember-computed-decorators"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a;e.default=Ember.Controller.extend((a={title:function(){return I18n.t("anniversaries.today.title",{date:moment().format(I18n.t("dates.full_no_year_no_time"))})},actions:{loadMore:function(){this.get("model").loadMore()}}},function(e,t,a,i,r){var n={};return Object.keys(i).forEach(function(e){n[e]=i[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=a.slice().reverse().reduce(function(a,i){return i(e,t,a)||a},n),r&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(r):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}(a,"title",[t.default],Object.getOwnPropertyDescriptor(a,"title"),a),a))}),define("discourse/plugins/discourse-cakeday/discourse/controllers/cakeday-anniversaries-upcoming",["exports","ember-addons/ember-computed-decorators"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a;e.default=Ember.Controller.extend((a={title:function(){var e=moment(),t=I18n.t("dates.full_no_year_no_time");return I18n.t("anniversaries.upcoming.title",{start_date:e.add(2,"days").format(t),end_date:e.add(7,"days").format(t)})},actions:{loadMore:function(){this.get("model").loadMore()}}},function(e,t,a,i,r){var n={};return Object.keys(i).forEach(function(e){n[e]=i[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=a.slice().reverse().reduce(function(a,i){return i(e,t,a)||a},n),r&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(r):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}(a,"title",[t.default],Object.getOwnPropertyDescriptor(a,"title"),a),a))}),define("discourse/plugins/discourse-cakeday/discourse/controllers/cakeday-birthdays-tomorrow",["exports","ember-addons/ember-computed-decorators"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a;e.default=Ember.Controller.extend((a={title:function(){return I18n.t("birthdays.today.title",{date:moment().add(1,"day").format(I18n.t("dates.full_no_year_no_time"))})},actions:{loadMore:function(){this.get("model").loadMore()}}},function(e,t,a,i,r){var n={};return Object.keys(i).forEach(function(e){n[e]=i[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=a.slice().reverse().reduce(function(a,i){return i(e,t,a)||a},n),r&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(r):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}(a,"title",[t.default],Object.getOwnPropertyDescriptor(a,"title"),a),a))}),define("discourse/plugins/discourse-cakeday/discourse/controllers/cakeday-birthdays-today",["exports","ember-addons/ember-computed-decorators"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a;e.default=Ember.Controller.extend((a={title:function(){return I18n.t("birthdays.today.title",{date:moment().format(I18n.t("dates.full_no_year_no_time"))})},actions:{loadMore:function(){this.get("model").loadMore()}}},function(e,t,a,i,r){var n={};return Object.keys(i).forEach(function(e){n[e]=i[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=a.slice().reverse().reduce(function(a,i){return i(e,t,a)||a},n),r&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(r):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}(a,"title",[t.default],Object.getOwnPropertyDescriptor(a,"title"),a),a))}),define("discourse/plugins/discourse-cakeday/discourse/controllers/cakeday-birthdays-upcoming",["exports","ember-addons/ember-computed-decorators"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a;e.default=Ember.Controller.extend((a={title:function(){var e=moment(),t=I18n.t("dates.full_no_year_no_time");return I18n.t("birthdays.upcoming.title",{start_date:e.add(2,"days").format(t),end_date:e.add(7,"days").format(t)})},actions:{loadMore:function(){this.get("model").loadMore()}}},function(e,t,a,i,r){var n={};return Object.keys(i).forEach(function(e){n[e]=i[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=a.slice().reverse().reduce(function(a,i){return i(e,t,a)||a},n),r&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(r):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}(a,"title",[t.default],Object.getOwnPropertyDescriptor(a,"title"),a),a))}),define("discourse/plugins/discourse-cakeday/discourse/controllers/cakeday-anniversaries-tomorrow",["exports","ember-addons/ember-computed-decorators"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a;e.default=Ember.Controller.extend((a={title:function(){return I18n.t("anniversaries.today.title",{date:moment().add(1,"day").format(I18n.t("dates.full_no_year_no_time"))})},actions:{loadMore:function(){this.get("model").loadMore()}}},function(e,t,a,i,r){var n={};return Object.keys(i).forEach(function(e){n[e]=i[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=a.slice().reverse().reduce(function(a,i){return i(e,t,a)||a},n),r&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(r):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}(a,"title",[t.default],Object.getOwnPropertyDescriptor(a,"title"),a),a))}),define("discourse/plugins/discourse-cakeday/discourse/controllers/cakeday-anniversaries-all",["exports","ember-addons/ember-computed-decorators"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a;e.default=Ember.Controller.extend((a={queryParams:["month"],month:moment().month()+1,months:function(){return moment.months().map(function(e,t){return{name:e,value:t+1}})},actions:{loadMore:function(){this.get("model").loadMore()}}},function(e,t,a,i,r){var n={};return Object.keys(i).forEach(function(e){n[e]=i[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=a.slice().reverse().reduce(function(a,i){return i(e,t,a)||a},n),r&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(r):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}(a,"months",[t.default],Object.getOwnPropertyDescriptor(a,"months"),a),a))}),define("discourse/plugins/discourse-cakeday/discourse/controllers/cakeday",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({cakedayEnabled:Ember.computed.alias("siteSettings.cakeday_enabled"),cakedayBirthdayEnabled:Ember.computed.alias("siteSettings.cakeday_birthday_enabled")})}),define("discourse/plugins/discourse-cakeday/discourse/controllers/cakeday-birthdays-all",["exports","ember-addons/ember-computed-decorators"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a;e.default=Ember.Controller.extend((a={queryParams:["month"],month:moment().month()+1,months:function(){return moment.months().map(function(e,t){return{name:e,value:t+1}})},actions:{loadMore:function(){this.get("model").loadMore()}}},function(e,t,a,i,r){var n={};return Object.keys(i).forEach(function(e){n[e]=i[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=a.slice().reverse().reduce(function(a,i){return i(e,t,a)||a},n),r&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(r):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}(a,"months",[t.default],Object.getOwnPropertyDescriptor(a,"months"),a),a))}),Ember.TEMPLATES["javascripts/cakeday/anniversaries"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"div"],[11,"class","anniversaries"],[9],[0,"\\n  "],[7,"ul"],[11,"class","nav-pills"],[9],[0,"\\n    "],[7,"li"],[9],[0,"\\n"],[4,"link-to",null,[["route"],["cakeday.anniversaries.today"]],{"statements":[[0,"        "],[1,[29,"i18n",["cakeday.today"],null],false],[0,"\\n"]],"parameters":[]},null],[0,"    "],[10],[0,"\\n\\n    "],[7,"li"],[9],[0,"\\n"],[4,"link-to",null,[["route"],["cakeday.anniversaries.tomorrow"]],{"statements":[[0,"        "],[1,[29,"i18n",["cakeday.tomorrow"],null],false],[0,"\\n"]],"parameters":[]},null],[0,"    "],[10],[0,"\\n\\n    "],[7,"li"],[9],[0,"\\n"],[4,"link-to",null,[["route"],["cakeday.anniversaries.upcoming"]],{"statements":[[0,"        "],[1,[29,"i18n",["cakeday.upcoming"],null],false],[0,"\\n"]],"parameters":[]},null],[0,"    "],[10],[0,"\\n\\n    "],[7,"li"],[9],[0,"\\n"],[4,"link-to",null,[["route"],["cakeday.anniversaries.all"]],{"statements":[[0,"        "],[1,[29,"i18n",["cakeday.all"],null],false],[0,"\\n"]],"parameters":[]},null],[0,"    "],[10],[0,"\\n  "],[10],[0,"\\n\\n  "],[1,[23,"outlet"],false],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/cakeday/anniversaries"}}),Ember.TEMPLATES["javascripts/cakeday/anniversaries/tomorrow"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"h2"],[11,"class","cakeday-header"],[9],[1,[23,"title"],false],[10],[0,"\\n\\n"],[4,"load-more",null,[["selector","action"],[".user-info",[29,"action",[[24,0,[]],"loadMore"],null]]],{"statements":[[4,"conditional-loading-spinner",null,[["condition"],[[25,["model","loading"]]]],{"statements":[[4,"user-info-list",null,[["users"],[[25,["model"]]]],{"statements":[[0,"      "],[1,[29,"i18n",["anniversaries.tomorrow.empty"],null],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n  "],[1,[29,"conditional-loading-spinner",null,[["condition"],[[25,["model","loadingMore"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/cakeday/anniversaries/tomorrow"}}),Ember.TEMPLATES["javascripts/cakeday/anniversaries/today"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"h2"],[11,"class","cakeday-header"],[9],[1,[23,"title"],false],[10],[0,"\\n\\n"],[4,"load-more",null,[["selector","action"],[".user-info",[29,"action",[[24,0,[]],"loadMore"],null]]],{"statements":[[4,"conditional-loading-spinner",null,[["condition"],[[25,["model","loading"]]]],{"statements":[[4,"user-info-list",null,[["users"],[[25,["model"]]]],{"statements":[[0,"      "],[1,[29,"i18n",["anniversaries.today.empty"],null],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n  "],[1,[29,"conditional-loading-spinner",null,[["condition"],[[25,["model","loadingMore"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/cakeday/anniversaries/today"}}),Ember.TEMPLATES["javascripts/cakeday/anniversaries/all"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"load-more",null,[["selector","action"],[".user-info",[29,"action",[[24,0,[]],"loadMore"],null]]],{"statements":[[0,"  "],[7,"div"],[11,"class","cakeday-months"],[9],[0,"\\n    "],[7,"h2"],[11,"class","cakeday-header"],[9],[1,[29,"i18n",["anniversaries.month.title"],null],false],[10],[0,"\\n    "],[1,[29,"combo-box",null,[["content","value","valueAttribute","none"],[[25,["months"]],[25,["month"]],"value","cakeday.none"]]],false],[0,"\\n  "],[10],[0,"\\n\\n"],[4,"conditional-loading-spinner",null,[["condition"],[[25,["model","loading"]]]],{"statements":[[4,"user-info-list",null,[["users"],[[25,["model"]]]],{"statements":[[0,"      "],[1,[29,"i18n",["anniversaries.month.empty"],null],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n  "],[1,[29,"conditional-loading-spinner",null,[["condition"],[[25,["model","loadingMore"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/cakeday/anniversaries/all"}}),Ember.TEMPLATES["javascripts/cakeday/anniversaries/upcoming"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"h2"],[11,"class","cakeday-header"],[9],[1,[23,"title"],false],[10],[0,"\\n\\n"],[4,"load-more",null,[["selector","action"],[".user-info",[29,"action",[[24,0,[]],"loadMore"],null]]],{"statements":[[4,"conditional-loading-spinner",null,[["condition"],[[25,["model","loading"]]]],{"statements":[[4,"user-info-list",null,[["users"],[[25,["model"]]]],{"statements":[[0,"      "],[1,[29,"i18n",["anniversaries.upcoming.empty"],null],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n  "],[1,[29,"conditional-loading-spinner",null,[["condition"],[[25,["model","loadingMore"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/cakeday/anniversaries/upcoming"}}),Ember.TEMPLATES["javascripts/cakeday/birthdays"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"div"],[11,"class","birthdays"],[9],[0,"\\n  "],[7,"ul"],[11,"class","nav-pills"],[9],[0,"\\n    "],[7,"li"],[9],[0,"\\n"],[4,"link-to",null,[["route"],["cakeday.birthdays.today"]],{"statements":[[0,"        "],[1,[29,"i18n",["cakeday.today"],null],false],[0,"\\n"]],"parameters":[]},null],[0,"    "],[10],[0,"\\n\\n    "],[7,"li"],[9],[0,"\\n"],[4,"link-to",null,[["route"],["cakeday.birthdays.tomorrow"]],{"statements":[[0,"        "],[1,[29,"i18n",["cakeday.tomorrow"],null],false],[0,"\\n"]],"parameters":[]},null],[0,"    "],[10],[0,"\\n\\n    "],[7,"li"],[9],[0,"\\n"],[4,"link-to",null,[["route"],["cakeday.birthdays.upcoming"]],{"statements":[[0,"        "],[1,[29,"i18n",["cakeday.upcoming"],null],false],[0,"\\n"]],"parameters":[]},null],[0,"    "],[10],[0,"\\n\\n    "],[7,"li"],[9],[0,"\\n"],[4,"link-to",null,[["route"],["cakeday.birthdays.all"]],{"statements":[[0,"        "],[1,[29,"i18n",["cakeday.all"],null],false],[0,"\\n"]],"parameters":[]},null],[0,"    "],[10],[0,"\\n  "],[10],[0,"\\n\\n  "],[1,[23,"outlet"],false],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/cakeday/birthdays"}}),Ember.TEMPLATES["javascripts/cakeday/birthdays/tomorrow"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"h2"],[11,"class","cakeday-header"],[9],[1,[23,"title"],false],[10],[0,"\\n\\n"],[4,"load-more",null,[["selector","action"],[".user-info",[29,"action",[[24,0,[]],"loadMore"],null]]],{"statements":[[4,"conditional-loading-spinner",null,[["condition"],[[25,["model","loading"]]]],{"statements":[[4,"user-info-list",null,[["users"],[[25,["model"]]]],{"statements":[[0,"      "],[1,[29,"i18n",["birthdays.tomorrow.empty"],null],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n  "],[1,[29,"conditional-loading-spinner",null,[["condition"],[[25,["model","loadingMore"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/cakeday/birthdays/tomorrow"}}),Ember.TEMPLATES["javascripts/cakeday/birthdays/today"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"h2"],[11,"class","cakeday-header"],[9],[1,[23,"title"],false],[10],[0,"\\n\\n"],[4,"load-more",null,[["selector","action"],[".user-info",[29,"action",[[24,0,[]],"loadMore"],null]]],{"statements":[[4,"conditional-loading-spinner",null,[["condition"],[[25,["model","loading"]]]],{"statements":[[4,"user-info-list",null,[["users","isBirthday"],[[25,["model"]],true]],{"statements":[[0,"      "],[1,[29,"i18n",["birthdays.today.empty"],null],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n  "],[1,[29,"conditional-loading-spinner",null,[["condition"],[[25,["model","loadingMore"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/cakeday/birthdays/today"}}),Ember.TEMPLATES["javascripts/cakeday/birthdays/all"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"load-more",null,[["selector","action"],[".user-info",[29,"action",[[24,0,[]],"loadMore"],null]]],{"statements":[[0,"  "],[7,"div"],[11,"class","cakeday-months"],[9],[0,"\\n    "],[7,"h2"],[11,"class","cakeday-header"],[9],[1,[29,"i18n",["birthdays.month.title"],null],false],[10],[0,"\\n    "],[1,[29,"combo-box",null,[["content","value","valueAttribute","none"],[[25,["months"]],[25,["month"]],"value","cakeday.none"]]],false],[0,"\\n  "],[10],[0,"\\n\\n"],[4,"conditional-loading-spinner",null,[["condition"],[[25,["model","loading"]]]],{"statements":[[4,"user-info-list",null,[["users","isBirthday"],[[25,["model"]],true]],{"statements":[[0,"      "],[1,[29,"i18n",["birthdays.month.empty"],null],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n  "],[1,[29,"conditional-loading-spinner",null,[["condition"],[[25,["model","loadingMore"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/cakeday/birthdays/all"}}),Ember.TEMPLATES["javascripts/cakeday/birthdays/upcoming"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"h2"],[11,"class","cakeday-header"],[9],[1,[23,"title"],false],[10],[0,"\\n\\n"],[4,"load-more",null,[["selector","action"],[".user-info",[29,"action",[[24,0,[]],"loadMore"],null]]],{"statements":[[4,"conditional-loading-spinner",null,[["condition"],[[25,["model","loading"]]]],{"statements":[[4,"user-info-list",null,[["users","isBirthday"],[[25,["model"]],true]],{"statements":[[0,"      "],[1,[29,"i18n",["birthdays.upcoming.empty"],null],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n  "],[1,[29,"conditional-loading-spinner",null,[["condition"],[[25,["model","loadingMore"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/cakeday/birthdays/upcoming"}}),Ember.TEMPLATES["javascripts/components/user-info-list"]=Ember.HTMLBars.template({id:null,block:'{"symbols":["user","&default"],"statements":[[7,"ul"],[11,"class","user-info-list"],[9],[0,"\\n"],[4,"each",[[25,["users"]]],null,{"statements":[[0,"    "],[7,"li"],[11,"class","user-info-item"],[9],[0,"\\n"],[4,"user-info",null,[["user"],[[24,1,[]]]],{"statements":[[0,"        "],[7,"div"],[9],[1,[29,"cakeday-date",[[24,1,["cakeday_date"]]],[["isBirthday"],[[25,["isBirthday"]]]]],false],[10],[0,"\\n"]],"parameters":[]},null],[0,"    "],[10],[0,"\\n"]],"parameters":[1]},{"statements":[[0,"    "],[7,"div"],[11,"class","user-info-empty-message"],[9],[7,"h4"],[9],[15,2],[10],[10],[0,"\\n"]],"parameters":[]}],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/components/user-info-list"}}),Ember.TEMPLATES["javascripts/components/emoji-images"]=Ember.HTMLBars.template({id:null,block:'{"symbols":["html"],"statements":[[4,"if",[[25,["siteSettings","enable_emoji"]]],null,{"statements":[[0,"  "],[7,"div"],[12,"title",[23,"titleText"]],[9],[0,"\\n"],[4,"each",[[25,["emojiHTML"]]],null,{"statements":[[0,"      "],[1,[24,1,[]],true],[0,"\\n"]],"parameters":[1]},null],[0,"  "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"  "],[1,[29,"fa-icon",["birthday-cake"],[["title"],[[25,["titleText"]]]]],false],[0,"\\n"]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"javascripts/components/emoji-images"}}),Ember.TEMPLATES["javascripts/cakeday"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"div"],[11,"class","container cakeday"],[9],[0,"\\n  "],[7,"ul"],[11,"class","nav-pills"],[9],[0,"\\n"],[4,"if",[[25,["cakedayEnabled"]]],null,{"statements":[[0,"      "],[7,"li"],[11,"class","nav-item-anniversaries"],[9],[0,"\\n"],[4,"link-to",null,[["route"],["cakeday.anniversaries"]],{"statements":[[0,"          "],[1,[29,"i18n",["anniversaries.title"],null],false],[0,"\\n"]],"parameters":[]},null],[0,"      "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[25,["cakedayBirthdayEnabled"]]],null,{"statements":[[0,"      "],[7,"li"],[11,"class","nav-item-birthdays"],[9],[0,"\\n"],[4,"link-to",null,[["route"],["cakeday.birthdays"]],{"statements":[[0,"          "],[1,[29,"i18n",["birthdays.title"],null],false],[0,"\\n"]],"parameters":[]},null],[0,"      "],[10],[0,"\\n"]],"parameters":[]},null],[0,"  "],[10],[0,"\\n\\n  "],[1,[23,"outlet"],false],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/cakeday"}}),Ember.TEMPLATES["javascripts/connectors/user-post-names/user-cakeday"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[25,["siteSettings","cakeday_birthday_enabled"]]],null,{"statements":[[4,"if",[[25,["isUserBirthday"]]],null,{"statements":[[0,"    "],[1,[29,"emoji-images",null,[["list","title"],[[25,["siteSettings","cakeday_birthday_emoji"]],"birthdays.title"]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n"],[4,"if",[[25,["siteSettings","cakeday_enabled"]]],null,{"statements":[[4,"if",[[25,["isCakeday"]]],null,{"statements":[[0,"    "],[1,[29,"emoji-images",null,[["list","title"],[[25,["siteSettings","cakeday_emoji"]],"anniversaries.title"]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/connectors/user-post-names/user-cakeday"}}),Ember.TEMPLATES["javascripts/connectors/user-custom-preferences/user-date-of-birth-input"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[25,["siteSettings","cakeday_birthday_enabled"]]],null,{"statements":[[0,"  "],[7,"div"],[11,"class","control-group"],[9],[0,"\\n    "],[7,"label"],[11,"class","control-label"],[9],[1,[29,"i18n",["user.date_of_birth.label"],null],false],[10],[0,"\\n    "],[7,"div"],[11,"class","controls"],[9],[0,"\\n      "],[1,[29,"combo-box",null,[["content","value","valueAttribute","none"],[[25,["months"]],[25,["userBirthdayMonth"]],"value","cakeday.none"]]],false],[0,"\\n\\n      "],[1,[29,"combo-box",null,[["content","value","valueAttribute","none"],[[25,["days"]],[25,["userBirthdayDay"]],"value","cakeday.none"]]],false],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/connectors/user-custom-preferences/user-date-of-birth-input"}}),Ember.TEMPLATES["javascripts/connectors/user-card-post-names/user-card-cakeday"]=Ember.HTMLBars.template({id:null,
block:'{"symbols":[],"statements":[[4,"if",[[25,["siteSettings","cakeday_birthday_enabled"]]],null,{"statements":[[4,"if",[[25,["isUserBirthday"]]],null,{"statements":[[0,"    "],[1,[29,"emoji-images",null,[["list","title"],[[25,["siteSettings","cakeday_birthday_emoji"]],[25,["cakedayBirthdayTitle"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n"],[4,"if",[[25,["siteSettings","cakeday_enabled"]]],null,{"statements":[[4,"if",[[25,["isCakeday"]]],null,{"statements":[[0,"    "],[1,[29,"emoji-images",null,[["list","title"],[[25,["siteSettings","cakeday_emoji"]],[25,["cakedayTitle"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/connectors/user-card-post-names/user-card-cakeday"}}),define("discourse/plugins/discourse-cakeday/discourse/initializers/cakeday",["exports","ember-addons/ember-computed-decorators","discourse/controllers/preferences","discourse/controllers/user-card","discourse/controllers/user","discourse/lib/plugin-api","discourse/plugins/discourse-cakeday/discourse/lib/cakeday","discourse-common/lib/helpers"],function(e,t,a,i,r,n,s,o){"use strict";function l(e,t,a,i,r){var n={};return Object.keys(i).forEach(function(e){n[e]=i[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=a.slice().reverse().reduce(function(a,i){return i(e,t,a)||a},n),r&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(r):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}function d(e,t){var a=t.enable_emoji,i=t.cakeday_enabled,r=t.cakeday_birthday_enabled;i&&(e.includePostAttributes("user_created_at"),e.includePostAttributes("user_date_of_birth"),e.addPosterIcon(function(i,r){var n=r.user_created_at;if(!Ember.isEmpty(n)&&(0,s.isSameDay)(n,{anniversary:!0})){var o={};a?o.emoji=t.cakeday_emoji:o.icon="birthday-cake";var l=e.getCurrentUser();return l&&r.user_id===l.get("id")?o.title=I18n.t("user.anniversary.user_title"):o.title=I18n.t("user.anniversary.title"),o.emojiTitle=!1,o}})),r&&e.addPosterIcon(function(i,r){var n=r.user_date_of_birth;if(!Ember.isEmpty(n)&&(0,s.isSameDay)(n)){var o={};a?o.emoji=t.cakeday_birthday_emoji:o.icon="birthday-cake";var l=e.getCurrentUser();return l&&r.user_id===l.get("id")?o.title=I18n.t("user.date_of_birth.user_title"):o.title=I18n.t("user.date_of_birth.title"),o.emojiTitle=!1,o}}),(i||r)&&((0,o.registerUnbound)("cakeday-date",function(e,t){var a=moment(e);return t.isBirthday?a.format(I18n.t("dates.full_no_year_no_time")):a.format(I18n.t("dates.full_with_year_no_time"))}),e.decorateWidget("hamburger-menu:generalLinks",function(){var e=void 0;return i?e="cakeday.anniversaries.today":r&&(e="cakeday.birthdays.today"),{route:e,label:"cakeday.title",className:"cakeday-link"}}))}Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"cakeday",initialize:function(e){var o,u,c,m,y,f,p,b,h,v;if(e.lookup("current-user:main")){var k=e.lookup("site-settings:main");e.lookup("store:main").addPluralization("anniversary","anniversaries"),a.default.reopen((o=(0,t.observes)("userBirthdayMonth","userBirthdayDay"),u=(0,t.default)("model.date_of_birth"),c=(0,t.default)("model.date_of_birth"),m={days:_.range(1,32),months:function(){return moment.months().map(function(e,t){return{name:e,value:t+1}})},_setUserDateOfBirth:function(){var e=this.get("userBirthdayMonth"),t=this.get("userBirthdayDay"),a=this.get("model"),i="";""!==e&&""!==t&&(i="1904-"+this.get("userBirthdayMonth")+"-"+this.get("userBirthdayDay")),a.set("date_of_birth",i)},userBirthdayMonth:function(e){return moment(e,"YYYY-MM-DD").month()+1},userBirthdayDay:function(e){return moment(e,"YYYY-MM-DD").date()}},l(m,"months",[t.default],Object.getOwnPropertyDescriptor(m,"months"),m),l(m,"_setUserDateOfBirth",[o],Object.getOwnPropertyDescriptor(m,"_setUserDateOfBirth"),m),l(m,"userBirthdayMonth",[u],Object.getOwnPropertyDescriptor(m,"userBirthdayMonth"),m),l(m,"userBirthdayDay",[c],Object.getOwnPropertyDescriptor(m,"userBirthdayDay"),m),m)),i.default.reopen((y=(0,t.default)("model.created_at"),f=(0,t.default)("model.date_of_birth"),p={isCakeday:function(e){return(0,s.cakeday)(e)},isUserBirthday:function(e){return(0,s.cakedayBirthday)(e)}},l(p,"isCakeday",[y],Object.getOwnPropertyDescriptor(p,"isCakeday"),p),l(p,"isUserBirthday",[f],Object.getOwnPropertyDescriptor(p,"isUserBirthday"),p),p)),r.default.reopen((b=(0,t.default)("model.created_at"),h=(0,t.default)("model.date_of_birth"),v={isCakeday:function(e){return(0,s.cakeday)(e)},isUserBirthday:function(e){return(0,s.cakedayBirthday)(e)}},l(v,"isCakeday",[b],Object.getOwnPropertyDescriptor(v,"isCakeday"),v),l(v,"isUserBirthday",[h],Object.getOwnPropertyDescriptor(v,"isUserBirthday"),v),v)),(0,n.withPluginApi)("0.1",function(e){return d(e,k)})}}}});
//# sourceMappingURL=https://sjc5.discourse-cdn.com/elastic/assets/plugins/discourse-cakeday-53b0fbff863dab3267ea9c7363007a28ffa01d64da79b3971e14d6a313ef3c04.js.map