define("discourse/plugins/discourse-math/lib/discourse-markdown/discourse-math",["exports"],function(t){"use strict";function e(t,e,i){return t!==e&&(!!i.utils.isWhiteSpace(t)||(!!i.utils.isMdAsciiPunct(t)||!!i.utils.isPunctChar(t)))}function i(t,i,a){var s=t.pos,n=t.posMax;if(i||t.src.charCodeAt(s)!==a||n<s+2)return!1;if(t.src.charCodeAt(s+1)===a)return!1;if(s>0){if(!e(t.src.charCodeAt(s-1),a,t.md))return!1}for(var r=void 0,o=s+1;o<n;o++){if(t.src.charCodeAt(o)===a&&92!==t.src.charCodeAt(o-1)){r=o;break}}if(!r)return!1;if(r+1<=n){var u=t.src.charCodeAt(r+1);if(u&&!e(u,a,t.md))return!1}var c=t.src.slice(s+1,r),d=t.push("html_raw","",0),h=t.md.utils.escapeHtml(c),l=36===a?"'math'":"'asciimath'";return d.content="<span class="+l+">"+h+"</span>",t.pos=r+1,!0}function a(t,e){return i(t,e,36)}function s(t,e){return i(t,e,37)}function n(t,e,i,a){if(36!==t.src.charCodeAt(e))return!1;if(e++,36!==t.src.charCodeAt(e))return!1;e++;for(var s=e;s<i;s++)if(!a.utils.isSpace(t.src.charCodeAt(s)))return!1;return!0}function r(t,e,i,a){if(!n(t,t.bMarks[e]+t.tShift[e],t.eMarks[e],t.md))return!1;if(a)return!0;for(var s=e,r=!1;!(++s>=i);)if(n(t,t.bMarks[s]+t.tShift[s],t.eMarks[s],t.md)){r=!0;break}var o=t.push("html_raw","",0),u=r?t.eMarks[s-1]:t.eMarks[s],c=t.src.slice(t.bMarks[e+1]+t.tShift[e+1],u),d=t.md.utils.escapeHtml(c);return o.content="<div class='math'>\n"+d+"\n</div>\n",t.line=r?s+1:s,!0}function o(t){if(t.markdownIt){var e=void 0;t.registerOptions(function(t,i){t.features.math=i.discourse_math_enabled,e=i.discourse_math_enable_asciimath}),t.registerPlugin(function(t){e&&t.inline.ruler.after("escape","asciimath",s),t.inline.ruler.after("escape","math",a),t.block.ruler.after("code","math",r,{alt:["paragraph","reference","blockquote","list"]})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.setup=o}),define("discourse/plugins/discourse-math/initializers/discourse-math-katex",["exports","discourse/lib/plugin-api","discourse/lib/load-script"],function(t,e,i){"use strict";function a(){return(0,i.default)("/plugins/discourse-math/katex/katex.min.js").then(function(){return(0,i.default)("/plugins/discourse-math/katex/katex.min.css",{css:!0}).then(function(){return(0,i.default)("/plugins/discourse-math/katex/mhchem.min.js")})})}function s(t){var e=$(t),i="DIV"===t.tagName;if(!e.data("applied-katex")&&(e.data("applied-katex",!0),e.hasClass("math"))){var a=e.text();e.text(""),window.katex.render(a,t,{displayMode:i})}}function n(t){if(t&&t.find){var e=t.find(".math");e.length>0&&a().then(function(){e.each(function(t,e){return s(e)})})}}function r(t){t.decorateCooked(function(t){n(t)},{id:"katex"})}Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"apply-math-katex",initialize:function(t){var i=t.lookup("site-settings:main");i.discourse_math_enabled&&"katex"===i.discourse_math_provider&&(0,e.withPluginApi)("0.5",function(t){r(t)})}}}),define("discourse/plugins/discourse-math/initializers/discourse-math-mathjax",["exports","discourse/lib/plugin-api","discourse/lib/load-script"],function(t,e,i){"use strict";function a(t){if(!u){var e=["toMathML.js","Safe.js"];t.enable_accessibility&&e.push("[a11y]/accessibility-menu.js");var i={jax:["input/TeX","input/AsciiMath","input/MathML","output/CommonHTML"],TeX:{extensions:["AMSmath.js","AMSsymbols.js","autoload-all.js"]},extensions:e,showProcessingMessages:!1,root:Discourse.getURLWithCDN("/plugins/discourse-math/mathjax")};t.zoom_on_hover&&(i.menuSettings={zoom:"Hover"},i.MathEvents={hover:750}),window.MathJax=i,u=!0}}function s(t){return a(t),(0,i.default)("/plugins/discourse-math/mathjax/MathJax.2.7.5.js")}function n(t,e){var i=$(t);if(!i.data("applied-mathjax")){i.data("applied-mathjax",!0);var a=void 0,s=void 0;if(i.hasClass("math")){var n="DIV"===t.tagName?"div":"span",r="div"===n?"; mode=display":"";a=$("<"+n+' style="display: none;"><script type="math/tex'+r+'"><\/script></'+n+">"),s=a.children(),s.text(i.text()),i.after(a)}else i.hasClass("asciimath")&&(a=$('<span style="display: none;"><script type="math/asciimath"><\/script></span>'),s=a.children(),s.text(i.text()),i.after(a));Ember.run.later(this,function(){window.MathJax.Hub.Queue(function(){t.parentElement&&null!==t.parentElement.offsetParent&&window.MathJax.Hub.Typeset(s[0],function(){i.remove(),a.show()})})},e?200:0)}}function r(t,e){if(t&&t.find){var i=void 0;if(i=e.enable_asciimath?t.find(".math, .asciimath"):t.find(".math"),i.length>0){var a=t.hasClass("d-editor-preview");s(e).then(function(){i.each(function(t,e){return n(e,a)})})}}}function o(t,e){t.decorateCooked(function(t){r(t,e)},{id:"mathjax"})}Object.defineProperty(t,"__esModule",{value:!0});var u=!1;t.default={name:"apply-math-mathjax",initialize:function(t){var i=t.lookup("site-settings:main"),a={zoom_on_hover:i.discourse_math_zoom_on_hover,enable_accessibility:i.discourse_math_enable_accessibility,enable_asciimath:i.discourse_math_enable_asciimath};i.discourse_math_enabled&&"mathjax"===i.discourse_math_provider&&(0,e.withPluginApi)("0.5",function(t){o(t,a)})}}});
//# sourceMappingURL=https://sjc5.discourse-cdn.com/elastic/assets/plugins/discourse-math-1e7e0d83073d543c325498e61cb32850b0ecc0da23d66cc975315079f6d32c8b.js.map